
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setting up CI/CD</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/banner.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Validate Data" href="../validate-files/" />
    <link rel="prev" title="Testing Your Assistant" href="../testing-your-assistant/" />

  <!-- Google Tag Manager -->
  <script type="opt-in" data-type="application/javascript" data-name="analytics">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MMHSZCS');</script>
  <!-- End Google Tag Manager -->
   
  
  <meta itemprop="image" content="https://rasa.com/assets/img/facebook-og.png">
  <meta property="og:title" content="Setting up CI/CD" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://rasa.com/assets/img/facebook-og.png" />
  <meta property="og:url" content="https://rasa.com/docs/rasa/user-guide/setting-up-ci-cd" />
  
    <meta name="description" content="Set up a CI/CD pipeline to ensure that iterative improvements to your assistant are tested
and deployed with minimum manual effort" />
    <meta itemprop="description" content="Set up a CI/CD pipeline to ensure that iterative improvements to your assistant are tested
and deployed with minimum manual effort">
    <meta name="twitter:description" content="Set up a CI/CD pipeline to ensure that iterative improvements to your assistant are tested
and deployed with minimum manual effort" />
    <meta property="og:description" content="Set up a CI/CD pipeline to ensure that iterative improvements to your assistant are tested
and deployed with minimum manual effort" />
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Rasa_HQ">
  <meta name="twitter:title" content="Setting up CI/CD">
  <meta name="twitter:creator" content="@Rasa_HQ">
  <meta name="twitter:image" content="https://rasa.com/assets/img/facebook-og.png">

  <link rel="stylesheet" href="../../_static/xq-light.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/fontawesome/css/fontawesome-all.css" type="text/css" />
  <link rel="stylesheet" type="text/css" href="https://rasa.com/assets/css/klaro.css">
  <script defer type="text/javascript" src="https://rasa.com/assets/js/klaro_config.js"></script>
  <script defer type="text/javascript" src="https://rasa.com/assets/js/klaro.js"></script>
  <script defer type="text/javascript" src="../../_static/ace/src-min-noconflict/ace.js"></script>
  <script defer type="text/javascript" src="../../_static/chatblock/rasa-chatblock.min.js"></script>
  <script type="text/javascript" src="https://storage.googleapis.com/docs-theme/clipboard.min.js"></script>
  
    <link rel="icon" sizes="192x192" href="../../_static/icon-192x192.png">
    <link rel="apple-touch-icon" href="../../_static/icon-192x192.png" />
  
  
    
      <link rel="canonical" href="https://rasa.com/docs/rasa/user-guide/setting-up-ci-cd/"/>
    
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />


  </head><body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe data-name="analytics" data-src="https://www.googletagmanager.com/ns.html?id=GTM-MMHSZCS" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="nav-top">
  <div class="nav-container">
    <ul class="main-nav nav">
      <li>
      <a href="/docs/" class="brand-link">
          <img src="../../_static/rasa_logo.svg" width="80px" height="40px" title="Rasa logo" alt="Rasa logo">
    	    <span class="logo extension">docs</span>
    	</a>
      </li>
      	
          
            
              <li class="active"><a href=/docs/rasa-overview/>Overview of Rasa</a></li>
            
          
      	
          
	        
      	      <li><a href=/docs/rasa/>Rasa Open Source</a></li>
            
      	  
      	
          
      	    <li><a href=/docs/rasa-x/>Rasa X</a></li>
      	  
      	
    </ul>
    <ul class="secondary-nav nav">
      <li>
        <input type="text" class="search ds-input" placeholder="Search documentation...">
      </li>
      <li>
        <a href="https://github.com/rasaHQ/" target="_blank"><button class="button btn-ghost white"> <i class="fab fa-github"></i>GitHub</button></a>
      </li>
      <li>
        <a href="https://forum.rasa.com" target="_blank"><button class="button"><i class="fas fa-comments"></i> Ask the Community</button></a>
      </li>
    </ul>
  </div>
</div>

  
    
      <div class="sidebar-extended"></div>
    
  

  
    
      <div class="document">
    
  

    
      
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rasa-tutorial/">Tutorial: Rasa Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building-assistants/">Tutorial: Building Assistants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command-line-interface/">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../messaging-and-voice-channels/">Messaging and Voice Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing-your-assistant/">Testing Your Assistant</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setting up CI/CD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../validate-files/">Validate Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuring-http-api/">Configuring the HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to-deploy/">Deploying Your Rasa Assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud-storage/">Cloud Storage</a></li>
</ul>
<p class="caption"><span class="caption-text">NLU</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/about/">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/using-nlu-only/">Using NLU Only</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/training-data-format/">Training Data Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/language-support/">Language Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/choosing-a-pipeline/">Choosing a Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/components/">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/entity-extraction/">Entity Extraction</a></li>
</ul>
<p class="caption"><span class="caption-text">Core</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core/about/">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/stories/">Stories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/domains/">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/responses/">Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/actions/">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/reminders-and-external-events/">Reminders and External Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/policies/">Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/slots/">Slots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/forms/">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/retrieval-actions/">Retrieval Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/interactive-learning/">Interactive Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/fallback-actions/">Fallback Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/knowledge-bases/">Knowledge Base Actions</a></li>
</ul>
<p class="caption"><span class="caption-text">Conversation Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/dialogue-elements/">Dialogue Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/small-talk/">Small Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/completing-tasks/">Completing Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/guiding-users/">Guiding Users</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/action-server/">Action Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/http-api/">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/jupyter-notebooks/">Jupyter Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/agent/">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/custom-nlu-components/">Custom NLU Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/rasa-sdk/">Rasa SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/events/">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/tracker/">Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/tracker-stores/">Tracker Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/event-brokers/">Event Brokers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/lock-stores/">Lock Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/training-data-importers/">Training Data Importers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/core-featurization/">Featurization of Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/tensorflow_usage/">TensorFlow Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration-guide/">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/">Rasa Open Source Change Log</a></li>
</ul>
<p class="caption"><span class="caption-text">Migrate from (beta)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/google-dialogflow-to-rasa/">Dialogflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/facebook-wit-ai-to-rasa/">Wit.ai</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/microsoft-luis-to-rasa/">LUIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/ibm-watson-to-rasa/">IBM Watson</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a></li>
</ul>

<div class="versions">
    <p class="caption">Versions</p>
    <div class="versions-content">
      <div>
        <span class="current-version">
          viewing: 1.9.6
        </span>
      </div>
      <div class="other-versions">
          <p>tags</p>
          <div class="dropdown-content">
              <a href="../../../1.10.11/user-guide/setting-up-ci-cd/">1.10.11</a>
              <a href="../../../1.10.10/user-guide/setting-up-ci-cd/">1.10.10</a>
              <a href="../../../1.10.9/user-guide/setting-up-ci-cd/">1.10.9</a>
              <a href="../../../1.10.8/user-guide/setting-up-ci-cd/">1.10.8</a>
              <a href="../../../1.10.7/user-guide/setting-up-ci-cd/">1.10.7</a>
              <a href="../../../1.10.6/user-guide/setting-up-ci-cd/">1.10.6</a>
              <a href="../../../1.10.5/user-guide/setting-up-ci-cd/">1.10.5</a>
              <a href="../../../1.10.4/user-guide/setting-up-ci-cd/">1.10.4</a>
              <a href="../../../1.10.3/user-guide/setting-up-ci-cd/">1.10.3</a>
              <a href="../../../1.10.2/user-guide/setting-up-ci-cd/">1.10.2</a>
              <a href="../../../1.10.1/user-guide/setting-up-ci-cd/">1.10.1</a>
              <a href="../../../1.10.0/user-guide/setting-up-ci-cd/">1.10.0</a>
              <a href="../../../1.9.7/user-guide/setting-up-ci-cd/">1.9.7</a>
              <a href="../../../1.9.6/user-guide/setting-up-ci-cd/">1.9.6</a>
              <a href="../../../1.9.5/index/">1.9.5</a>
              <a href="../../../1.9.4/index/">1.9.4</a>
              <a href="../../../1.9.3/index/">1.9.3</a>
              <a href="../../../1.9.2/index/">1.9.2</a>
              <a href="../../../1.9.1/index/">1.9.1</a>
              <a href="../../../1.9.0/index/">1.9.0</a>
              <a href="../../../1.8.3/index/">1.8.3</a>
              <a href="../../../1.8.2/index/">1.8.2</a>
              <a href="../../../1.8.1/index/">1.8.1</a>
              <a href="../../../1.8.0/index/">1.8.0</a>
              <a href="../../../1.7.4/index/">1.7.4</a>
              <a href="../../../1.7.3/index/">1.7.3</a>
              <a href="../../../1.7.2/index/">1.7.2</a>
              <a href="../../../1.7.1/index/">1.7.1</a>
              <a href="../../../1.7.0/index/">1.7.0</a>
              <a href="../../../1.6.2/index/">1.6.2</a>
              <a href="../../../1.5.3/index/">1.5.3</a>
              <a href="../../../1.4.6/index/">1.4.6</a>
              <a href="../../../1.3.10/index/">1.3.10</a>
              <a href="../../../1.2.9/index/">1.2.9</a>
          </div>
      </div>
    </div>
</div>


        </div>
      </div>
      
    
      
        
      
        <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  


    
    



    <p class="scv-banner"><a href="../../../1.10.11/user-guide/setting-up-ci-cd/"><b>Warning:</b> This document is for an old version of Rasa. The latest version is 1.10.11.</a></p>
<div class="section" id="setting-up-ci-cd">
<span id="id1"></span><h1>Setting up CI/CD<a class="headerlink" href="#setting-up-ci-cd" title="Permalink to this headline">¶</a></h1>
<p>Even though developing a contextual assistant is different from developing traditional
software, you should still follow software development best practices.
Setting up a Continuous Integration (CI) and Continuous Deployment (CD)
pipeline ensures that incremental updates to your bot are improving it, not harming it.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id6">Overview</a></p></li>
<li><p><a class="reference internal" href="#continuous-integration-ci" id="id7">Continuous Integration (CI)</a></p>
<ul>
<li><p><a class="reference internal" href="#validate-data-and-stories" id="id8">Validate Data and Stories</a></p></li>
<li><p><a class="reference internal" href="#train-a-model" id="id9">Train a Model</a></p></li>
<li><p><a class="reference internal" href="#test-the-assistant" id="id10">Test the Assistant</a></p></li>
<li><p><a class="reference internal" href="#compare-nlu-performance" id="id11">Compare NLU Performance</a></p></li>
<li><p><a class="reference internal" href="#test-action-code" id="id12">Test Action Code</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#continuous-deployment-cd" id="id13">Continuous Deployment (CD)</a></p>
<ul>
<li><p><a class="reference internal" href="#deploy-your-rasa-model" id="id14">Deploy your Rasa Model</a></p></li>
<li><p><a class="reference internal" href="#deploy-your-action-server" id="id15">Deploy your Action Server</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#example-ci-cd-pipelines" id="id16">Example CI/CD pipelines</a></p></li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id6">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Continous Integration (CI) is the practice of merging in code changes
frequently and automatically testing changes as they are committed. Continuous
Deployment (CD) means automatically deploying integrated changes to a staging
or production environment. Together, they allow you to make more frequent improvements
to your assistant and efficiently test and deploy those changes.</p>
<p>This guide will cover <strong>what</strong> should go in a CI/CD pipeline, specific to a
Rasa project. <strong>How</strong> you implement that pipeline is up to you.
There are many CI/CD tools out there, such as <a class="reference external" href="https://github.com/features/actions">GitHub Actions</a>,
<a class="reference external" href="https://docs.gitlab.com/ee/ci/">GitLab CI/CD</a>, <a class="reference external" href="https://jenkins.io/doc/">Jenkins</a>, and
<a class="reference external" href="https://circleci.com/docs/2.0/">CircleCI</a>. We recommend choosing a tool that integrates with
whatever Git repository you use.</p>
</div>
<div class="section" id="continuous-integration-ci">
<h2><a class="toc-backref" href="#id7">Continuous Integration (CI)</a><a class="headerlink" href="#continuous-integration-ci" title="Permalink to this headline">¶</a></h2>
<p>The best way to improve an assistant is with frequent <a class="reference external" href="https://rasa.com/docs/rasa-x/user-guide/improve-assistant/">incremental updates</a>.
No matter how small a change is, you want to be sure that it doesn’t introduce
new problems or negatively impact the performance of your assistant.</p>
<p>It is usually best to run CI checks on merge / pull requests or on commit. Most tests are
quick enough to run on every change. However, you can choose to run more
resource-intensive tests only when certain files have been changed or when some
other indicator is present. For example, if your code is hosted on Github,
you can make a test run only if the pull request has a certain label (e.g. “NLU testing required”).</p>
<div class="contents local topic" id="id2">
<ul class="simple">
<li><p><a class="reference internal" href="#validate-data-and-stories" id="id17">Validate Data and Stories</a></p></li>
<li><p><a class="reference internal" href="#train-a-model" id="id18">Train a Model</a></p></li>
<li><p><a class="reference internal" href="#test-the-assistant" id="id19">Test the Assistant</a></p></li>
<li><p><a class="reference internal" href="#compare-nlu-performance" id="id20">Compare NLU Performance</a></p></li>
<li><p><a class="reference internal" href="#test-action-code" id="id21">Test Action Code</a></p></li>
</ul>
</div>
<div class="section" id="validate-data-and-stories">
<h3><a class="toc-backref" href="#id17">Validate Data and Stories</a><a class="headerlink" href="#validate-data-and-stories" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../validate-files/#validate-files"><span class="std std-ref">Data validation</span></a> verifies that there are no mistakes or
major inconsistencies in your domain file, NLU data, or story data.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rasa data validate --fail-on-warnings --max-history &lt;max_history&gt;
</pre></div>
</div>
<p>If data validation results in errors, training a model will also fail. By
including the <code class="docutils literal notranslate"><span class="pre">--fail-on-warnings</span></code> flag, validation will also fail on
warnings about problems that won’t prevent training a model, but might indicate
messy data, such as actions listed in the domain that aren’t used in any
stories.</p>
<p>Data validation includes <a class="reference internal" href="../validate-files/#test-story-files-for-conflicts"><span class="std std-ref">story structure validation</span></a>.
Story validation checks if you have any
stories where different bot actions follow from the same dialogue history.
Conflicts between stories will prevent a model from learning the correct
pattern for a dialogue. Set the <code class="docutils literal notranslate"><span class="pre">--max-history</span></code> parameter to the value of <code class="docutils literal notranslate"><span class="pre">max_history</span></code> for the
memoization policy in your <code class="docutils literal notranslate"><span class="pre">config.yml</span></code>. If you haven’t set one, use the default of <code class="docutils literal notranslate"><span class="pre">5</span></code>.</p>
</div>
<div class="section" id="train-a-model">
<h3><a class="toc-backref" href="#id18">Train a Model</a><a class="headerlink" href="#train-a-model" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rasa train
</pre></div>
</div>
<p>Training a model verifies that your NLU pipeline and policy configurations are
valid and trainable, and it provides a model to use for test conversations.
If it passes the CI tests, then you can also <a class="reference internal" href="#uploading-a-model"><span class="std std-ref">upload the trained model</span></a>
to your server as part of the continuous deployment process .</p>
</div>
<div class="section" id="test-the-assistant">
<span id="id3"></span><h3><a class="toc-backref" href="#id19">Test the Assistant</a><a class="headerlink" href="#test-the-assistant" title="Permalink to this headline">¶</a></h3>
<p>Testing your trained model on <a class="reference internal" href="../testing-your-assistant/#end-to-end-testing"><span class="std std-ref">test conversations</span></a> is the best way to have confidence in how your assistant
will act in certain situations. These stories, written in a modified story
format, allow you to provide entire conversations and test that, given this
user input, your model will behave in the expected manner. This is especially
important as you start introducing more complicated stories from user
conversations.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rasa <span class="nb">test</span> --stories tests/conversation_tests.md --fail-on-prediction-errors
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--fail-on-prediction-errors</span></code> flag ensures the test will fail if any test
conversation fails.</p>
<p>End-to-end testing is only as thorough and accurate as the test
cases you include, so you should continue to grow your set of test conversations
as you make improvements to your assistant. A good rule of thumb to follow is that you should aim for your test conversations
to be representative of the true distribution of real conversations.
Rasa X makes it easy to <a class="reference external" href="https://rasa.com/docs/rasa-x/user-guide/improve-assistant.html#add-test-conversation">add test conversations based on real conversations</a>.</p>
<p>Note: End-to-end testing does <strong>not</strong> execute your action code. You will need to
<a class="reference internal" href="#testing-action-code"><span class="std std-ref">test your action code</span></a> in a seperate step.</p>
</div>
<div class="section" id="compare-nlu-performance">
<h3><a class="toc-backref" href="#id20">Compare NLU Performance</a><a class="headerlink" href="#compare-nlu-performance" title="Permalink to this headline">¶</a></h3>
<p>If you’ve made significant changes to your NLU training data (e.g.
splitting an intent into two intents or adding a lot of training examples), you should run a
<a class="reference internal" href="../testing-your-assistant/#nlu-evaluation"><span class="std std-ref">full NLU evaluation</span></a>. You’ll want to compare
the performance of the NLU model without your changes to an NLU model with your
changes.</p>
<p>You can do this by running NLU testing in cross-validation mode:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rasa <span class="nb">test</span> nlu --cross-validation
</pre></div>
</div>
<p>You could also train a model on a training set and testing it on a test set. If you use the train-test
set approach, it is best to <a class="reference internal" href="../command-line-interface/#train-test-split"><span class="std std-ref">shuffle and split your data</span></a> using <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">data</span> <span class="pre">split</span></code> as part of this CI step, as
opposed to using a static NLU test set, which can easily become outdated.</p>
<p>Because this test doesn’t result in a pass/fail exit code, it’s best to make
the results visible so that you can interpret them.
For example, <a class="reference external" href="https://gist.github.com/amn41/de555c93913a01fbd56df2e2d211862c">this workflow</a>
includes commenting on a PR with a results table that shows which intents are confused with others.</p>
<p>Since NLU comparison can be a fairly resource intensive test, you may choose to run this test
only when certain conditions are met. Conditions might include the presence of a manual label (e.g. “NLU
testing required”), changes to NLU data, or changes to the NLU pipeline.</p>
</div>
<div class="section" id="test-action-code">
<span id="testing-action-code"></span><h3><a class="toc-backref" href="#id21">Test Action Code</a><a class="headerlink" href="#test-action-code" title="Permalink to this headline">¶</a></h3>
<p>The approach used to test your action code will depend on how it is
implemented. For example, if you connect to external APIs, it is recommended to write unit tests to ensure
that those APIs respond as expected to common inputs. However you test your action code, you should
include these tests in your CI pipeline so that they run each time you make changes.</p>
</div>
</div>
<div class="section" id="continuous-deployment-cd">
<h2><a class="toc-backref" href="#id13">Continuous Deployment (CD)</a><a class="headerlink" href="#continuous-deployment-cd" title="Permalink to this headline">¶</a></h2>
<p>To get improvements out to your users frequently, you will want to automate as
much of the deployment process as possible.</p>
<p>CD steps usually run on push or merge to a certain branch, once CI checks have
succeeded.</p>
<div class="contents local topic" id="id4">
<ul class="simple">
<li><p><a class="reference internal" href="#deploy-your-rasa-model" id="id22">Deploy your Rasa Model</a></p></li>
<li><p><a class="reference internal" href="#deploy-your-action-server" id="id23">Deploy your Action Server</a></p></li>
</ul>
</div>
<div class="section" id="deploy-your-rasa-model">
<span id="uploading-a-model"></span><h3><a class="toc-backref" href="#id22">Deploy your Rasa Model</a><a class="headerlink" href="#deploy-your-rasa-model" title="Permalink to this headline">¶</a></h3>
<p>If you ran <a class="reference internal" href="#test-the-assistant"><span class="std std-ref">end-to-end tests</span></a> in your CI pipeline,
you’ll already have a trained model. You can set up your CD pipeline to upload the trained model to your
Rasa server if the CI results are satisfactory. For example, to upload a model to Rasa X:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -k -F <span class="s2">&quot;model=@models/my_model.tar.gz&quot;</span> <span class="s2">&quot;https://example.rasa.com/api/projects/default/models?api_token={your_api_token}&quot;</span>
</pre></div>
</div>
<p>If you are using Rasa X, you can also <a class="reference external" href="https://rasa.com/docs/rasa-x/api/rasa-x-http-api/#tag/Models/paths/~1projects~1{project_id}~1models~1{model}~1tags~1{tag}/put">tag the uploaded model</a>
as <code class="docutils literal notranslate"><span class="pre">active</span></code> (or whichever deployment you want to tag if using multiple <a class="reference external" href="https://rasa.com/docs/rasa-x/enterprise/deployment-environments/#">deployment environments</a>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -X PUT <span class="s2">&quot;https://example.rasa.com/api/projects/default/models/my_model/tags/active&quot;</span>
</pre></div>
</div>
<p>However, if your update includes changes to both your model and your action
code, and these changes depend on each other in any way, you should <strong>not</strong>
automatically tag the model as <code class="docutils literal notranslate"><span class="pre">production</span></code>. You will first need to build and
deploy your updated action server, so that the new model won’t e.g. call
actions that don’t exist in the pre-update action server.</p>
</div>
<div class="section" id="deploy-your-action-server">
<h3><a class="toc-backref" href="#id23">Deploy your Action Server</a><a class="headerlink" href="#deploy-your-action-server" title="Permalink to this headline">¶</a></h3>
<p>You can automate
<a class="reference internal" href="../how-to-deploy/#building-an-action-server-image"><span class="std std-ref">building and uploading a new image for your action server</span></a>,
to an image repository for each
update to your action code. As noted above, you should be careful with
automatically deploying a new image tag to production if the action server
would be incompatible with the current production model.</p>
</div>
</div>
<div class="section" id="example-ci-cd-pipelines">
<h2><a class="toc-backref" href="#id16">Example CI/CD pipelines</a><a class="headerlink" href="#example-ci-cd-pipelines" title="Permalink to this headline">¶</a></h2>
<p>As examples, see the CI/CD pipelines for
<a class="reference external" href="https://github.com/RasaHQ/rasa-demo/blob/master/.github/workflows/build_and_deploy.yml">Sara</a>,
the Rasa assistant that you can talk to in the Rasa Docs, and
<a class="reference external" href="https://github.com/RasaHQ/carbon-assistant/blob/master/.github/workflows/model_ci.yml">Carbon Bot</a>.
Both use <a class="reference external" href="https://github.com/features/actions">Github Actions</a> as a CI/CD tool.</p>
<p>These examples are just two of many possibilities. If you have a CI/CD setup you like, please
share it with the Rasa community on the <a class="reference external" href="https://forum.rasa.com/">Rasa Forum</a>.</p>
</div>
</div>


	    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
	    <script type="text/javascript"> docsearch({
	     apiKey: '1f9e0efb89e98543f6613a60f847b176',
	     indexName: 'rasa',
	     inputSelector: 'body > div.nav-top > .nav-container > .nav > li > input',
	     debug: false // Set debug to true if you want to inspect the dropdown
	    });
	    </script>
          </div>

          <div class="footer">
            <div class="questions">
              Stuck?
              <a class="reference external" href="https://forum.rasa.com" target="_blank">Ask a Question</a>
              or
              <a class="reference external" href="https://github.com/rasahq/rasa/issues" target="_blank">Create an Issue</a>
            </div>
            <div class="social">
              <a href="https://github.com/RasaHQ" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
              <a href="https://stackoverflow.com/search?q=rasa" target="_blank" title="Stack Overflow"><i class="fab fa-stack-overflow"></i></a>
              <a href="https://www.youtube.com/channel/UCJ0V6493mLvqdiVwOKWBODQ" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
              <a href="https://twitter.com/rasa_hq" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a>
            </div>

            <div class="copyright small">
            &copy;2020, Rasa Technologies | <a href="https://rasa.com/imprint/" target="_blank">Imprint</a> | <a href="https://rasa.com/privacy-policy/" target="_blank">Privacy Policy</a>
            
            </div>

          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>


    

  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag(...arguments) {
      dataLayer.push(...arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-87333416-1', {
      'anonymize_ip': true,
    });
  </script>
  <script src="https://rasa.com/assets/js/js.cookies.js"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script type="opt-in" data-name="analytics" data-type="text/javascript" data-src="https://www.googletagmanager.com/gtag/js?id=UA-87333416-1"></script>
  <script type="opt-in" data-name="analytics" data-type="text/javascript" data-src="https://rasa.com/assets/js/userId.js"></script>

  <script type="text/javascript">
    var clipboard = new ClipboardJS('.copyable');
    clipboard.on('success', function(e) {
      gtag('event', e.action, {
        'event_category': 'code',
        'event_label': e.text
      });
      const id = e.text.replace(/ /g,'-');
      document.getElementById(id).classList.add('visible');
      setTimeout(function(){
        document.getElementById(id).classList.remove('visible');},
        800
      );
    });
    clipboard.on('error', function(e) {
      console.log(e);
    });

  </script>

  <!-- ACE Editor, Train & download buttons -->
  <script>
    let updateIntervalId;

    function uuidv4() {
      return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
              (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
      );
    }

    function fetchTracker(url, chatBlockId, conversationId) {
      $.ajax({
        url: url + "/conversations/" + conversationId + "/tracker",
        method: "get",
        dataType: 'json',
        contentType: 'application/json',
        success: function(tracker, status) {
          initChatBlock(url, chatBlockId, conversationId, tracker);
        }
      });
    }

    function sendMessage(url, chatBlockId, conversationId, tracker, message) {
      $.ajax({
        url: url + "/webhooks/rest/webhook",
        method: "post",
        dataType: 'json',
        contentType: 'application/json',
        data: JSON.stringify({
          sender: conversationId,
          message: message
        }),
        success: function(result, status) {
          fetchTracker(url, chatBlockId, conversationId);
        },
      });
    }

    function startFetchingTracker(url, chatBlockId, conversationId) {
      const interval = 2000;

      fetchTracker(url, chatBlockId, conversationId);

      updateIntervalId = setInterval(() => {
        fetchTracker(url, chatBlockId, conversationId);
      }, interval);
    }

    function initChatBlock(url, id, conversationId, tracker) {
      ChatBlock.default.init({
        onSendMessage: (message) => {
          sendMessage(url, id, conversationId, tracker, message);
        },
        username: conversationId,
        tracker: tracker,
        selector: id
      });
    }

    const chatBlockId = '#rasa-chat-block';
    const trackingId = uuidv4();

    $(document).ready(() => {
      // make editors work
      const editors = document.querySelectorAll('.ace-editor');

      const assignTrainingDataToButton = function(e, id, trainButton) {
        const trainingData = trainButton.data('training');

        trainButton.data('training', JSON.stringify({
          ...JSON.parse(trainingData || "{}") || {},
          [id]: e.getValue(),
        }));
      };

      ace.config.set('modePath', "/_static/ace/src-min-noconflict");

      Array.from(editors).forEach(function(editor) {
        const e = ace.edit(editor);
        const id = editor.dataset['id'];
        const trackingEndpoint = editor.dataset['tr-endpoint'];

        e.session.setMode("ace/mode/" + editor.dataset['language']);
        e.renderer.setShowGutter(false);
        e.renderer.setShowPrintMargin(false);
        e.renderer.setPadding(24);
        e.renderer.setScrollMargin(24);
        e.setHighlightActiveLine(false);

        if (trackingEndpoint) {
          e.on("change", function() {
            if (!editor.dataset.hasChanged) {
              editor.dataset.hasChanged = true;
              $.ajax({
                url: trackingEndpoint,
                method: "POST",
                data: {editor: id},
              });
            }
          });
        }

        const trainButton = $('.train__button');

        assignTrainingDataToButton(e, id, trainButton);
        e.on("blur", function() {
          assignTrainingDataToButton(e, id, trainButton);
        });

        editor.style.height = editor.dataset['height'] + 'px';
      });

      // initialize a chat block
      initChatBlock("", chatBlockId, trackingId, {});
    });

    // set train button callback
    $( ".train__button" ).click(function() {
      const trainButton = $('.train__button');
      const trainSpinner = $('.train__spinner');
      const downloadButton = $('.download__button');

      trainButton.prop("disabled", true);
      downloadButton.prop("disabled", true);
      trainSpinner.removeClass('train__spinner--hidden');

      if (updateIntervalId) {
        clearInterval(updateIntervalId);
        initChatBlock("", chatBlockId, trackingId, {});
      }

      $.ajax({
        url: trainButton.data('endpoint'),
        method: trainButton.data('method'),
        dataType: 'json',
        contentType: 'application/json',
        data: JSON.stringify({ tracking_id: trackingId, ...JSON.parse(trainButton.data('training')) }),
        success: function(result, status) {
          trainSpinner.addClass('train__spinner--hidden');
          trainButton.prop("disabled", false);

          if (result['project_download_url']) {
            trainSpinner.addClass('train__spinner--hidden');
            downloadButton.prop("disabled", false);
            downloadButton.data("url", result['project_download_url']);
          }

          if (result['rasa_service_url']) {
            const conversationId = uuidv4();
            startFetchingTracker(result['rasa_service_url'], chatBlockId, conversationId);
          }
        },
        error: function(result, status) {
          trainSpinner.addClass('train__spinner--hidden');
          trainButton.prop("disabled", false);
        }
      });
    });

    // set download button callback
    $( ".download__button" ).click(function() {
      const downloadButton = $('.download__button');
      const url = downloadButton.data("url");

      if (url) {
        location.href = url;
      }
    });
  </script>

  <!-- Dismissable announcement banner -->
  <script>
    var banners = document.querySelectorAll('.announcement-banner');

    Array.from(banners).forEach(function(banner) {
      var cookie_id = banner.dataset['cookie-id'];

      if (localStorage.getItem(cookie_id) !== 'true') {
        banner.classList.add('announcement-banner--visible');
      }

      var bannerCloseButton = banner.querySelector('.announcement-banner__close');

      bannerCloseButton && bannerCloseButton.addEventListener('click', function() {
        localStorage.setItem(cookie_id, 'true');
        banner.classList.remove('announcement-banner--visible');
      });
    });
  </script>

  <!-- onsite anchor fix (otherwise anchors scroll to far) -->
  <script>
    /* Adapted from https://stackoverflow.com/a/13067009/1906073 */
    (function(document, history, location) {
      var HISTORY_SUPPORT = !!(history && history.pushState);

      var anchorScrolls = {
        ANCHOR_REGEX: /^#[^ ]+$/,
        OFFSET_HEIGHT_PX: 66,

        /**
         * Establish events, and fix initial scroll position if a hash is provided.
         */
        init: function() {
          this.scrollToCurrent();
          $(window).on('hashchange', $.proxy(this, 'scrollToCurrent'));
          $('body').on('click', 'a', $.proxy(this, 'delegateAnchors'));
        },

        /**
         * Return the offset amount to deduct from the normal scroll position.
         * Modify as appropriate to allow for dynamic calculations
         */
        getFixedOffset: function() {
          return this.OFFSET_HEIGHT_PX;
        },

        /**
         * If the provided href is an anchor which resolves to an element on the
         * page, scroll to it.
         * @param  {String} href
         * @return {Boolean} - Was the href an anchor.
         */
        scrollIfAnchor: function(href, pushToHistory) {
          var match, anchorOffset;

          if(!this.ANCHOR_REGEX.test(href)) {
            return false;
          }

          match = document.getElementById(href.slice(1));

          if(match) {
            anchorOffset = $(match).offset().top - this.getFixedOffset();
            $('html, body').animate({ scrollTop: anchorOffset});

            // Add the state to history as-per normal anchor links
            if(HISTORY_SUPPORT && pushToHistory) {
              history.pushState({}, document.title, location.pathname + href);
            }
          }

          return !!match;
        },

        /**
         * Attempt to scroll to the current location's hash.
         */
        scrollToCurrent: function(e) {
          if(this.scrollIfAnchor(window.location.hash) && e) {
            e.preventDefault();
          }
        },

        /**
         * If the click event's target was an anchor, fix the scroll position.
         */
        delegateAnchors: function(e) {
          var elem = e.target;

          if(this.scrollIfAnchor(elem.getAttribute('href'), true)) {
            e.preventDefault();
          }
        }
      };

      $(document).ready($.proxy(anchorScrolls, 'init'));
    })(window.document, window.history, window.location);

  </script>
  <script type="opt-in" data-name="analytics" data-type="text/javascript" data-src="https://rasa.com/assets/js/u-info.js"></script>
      <div class="webchat-banner webchat-banner--hidden">
        <img src="https://rasa.com/assets/img/demo/sara_avatar.png" class="webchat-banner__avatar" alt="">
        👋 I can help you get started with Rasa and answer your technical questions.
        <button class="webchat-banner__close">
          <i class="fas fa-times"></i> 
        </button>
      </div>
      <div id="webchat">
        <script src="../../_static/rasa-webchat.js"></script>
        <script>
          WebChat.default.init({
            selector: "#webchat",
            initPayload: "/greet",
            socketUrl: "https://website-demo.rasa.com/",
            socketPath: "/socket.io",
            title: "Sara",
            subtitle: "I'm still in development",
            profileAvatar: "https://rasa.com/assets/img/demo/sara_avatar.png",
            showCloseButton: true,
            fullScreenMode: false,
            hideWhenNotConnected: false,
            connectOn: "open",
            autoClearCache: true,
            linksOpenTab: false,
            openLauncherImage: "../../_static/chat-icon.svg",
            customMessageDelay: (message) => {
              return 900 + message.length;
            },
            params: {
              storage: "local"
            },
            onWidgetEvent: {
              onChatOpen: () => {
                const webchatBanner = document.querySelector('.webchat-banner');
                if (webchatBanner) {
                  localStorage.setItem('WEBCHAT_BANNER_DISMISSED', 'true');
                  webchatBanner.classList.add('webchat-banner--hidden');
                }
              }
            }
          });

          try {
            const webchatBanner = document.querySelector('.webchat-banner');

            if (webchatBanner) {
              if (localStorage.getItem('WEBCHAT_BANNER_DISMISSED') !== 'true') {
                webchatBanner.classList.remove('webchat-banner--hidden');
              }

              const webChatBannerClose = document.querySelector('.webchat-banner__close');

              webChatBannerClose && webChatBannerClose.addEventListener('click', function() {
                localStorage.setItem('WEBCHAT_BANNER_DISMISSED', 'true');
                webchatBanner.classList.add('webchat-banner--hidden');
              });
            }
          } catch (e) {}
        </script>
      </div>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

  </body>
</html>